# BitChat Swift CLI Development
# Use: nix develop

# Default recipe
default:
    @just --list

# Build the Swift CLI (debug)
build-debug:
    swift build

# Build the Swift CLI (release)
build:
    swift build -c release

# Run the Swift CLI directly with swift run
run-swift:
    swift run bitchat-swift-cli

# Run the built binary
run:
    .build/release/bitchat-swift-cli

# Run with test configuration
run-test:
    .build/release/bitchat-swift-cli --relay wss://relay.damus.io --name swift-client

# Run with automation mode for testing
run-automation:
    .build/release/bitchat-swift-cli --automation-mode --name swift-test-client

# Test dependencies resolution
resolve:
    swift package resolve

# Update dependencies
update:
    swift package update

# Clean build artifacts
clean:
    swift package clean

# Show package info
info:
    swift package describe

# Check if built
status:
    @if [ -f .build/release/bitchat-swift-cli ]; then \
        echo "Swift CLI: Built (release)"; \
    elif [ -f .build/debug/bitchat-swift-cli ]; then \
        echo "Swift CLI: Built (debug)"; \
    else \
        echo "Swift CLI: Not built (run 'just build')"; \
    fi